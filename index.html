<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">

    <title>Kafka + Avro</title>

    <meta name="description" content="Exploring Avro as a Kafka data format">
    <meta name="author" content="Inaki Anduaga">

    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.4.0/css/reveal.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.4.0/css/theme/white.css" id="theme">

    <!-- Theme used for syntax highlighting of code -->
    <!-- https://cdnjs.com/libraries/highlight.js/ -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/styles/github.min.css">

    <!-- Printing and PDF exports -->
    <script>
        var link = document.createElement( 'link' );
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = window.location.search.match( /print-pdf/gi ) ? 'https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.4.0/css/print/pdf.css' : 'https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.4.0/css/print/paper.css';
        document.getElementsByTagName( 'head' )[0].appendChild( link );
    </script>

    <!--[if lt IE 9]>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.4.0/lib/js/html5shiv.js"></script>
    <![endif]-->

    <!-- GFM regular inline code tag -->
    <style>
        code:not(.hljs) {
            padding: 0;
            padding-top: 0.2em;
            padding-bottom: 0.2em;
            margin: 0;
            font-size: 85%;
            background-color: rgba(0,0,0,0.04);
            border-radius: 3px;
            /*color: #1b91ff*/
        }

        .small, a.small {
            display: inline-block;
            font-size: 0.6em;
            line-height: 1.2em;
            vertical-align: top;
        }
    </style>

</head>

<body>

<div class="reveal">

    <!-- Any section element inside of this container is displayed as a slide -->
    <div class="slides">

        <!-- Slides are separated by newline + three dashes + newline, vertical slides identical but two dashes -->
        <section
                data-markdown
                data-separator="^\n---\n$"
                data-separator-vertical="^\n--\n$"
                data-element-attributes="{_\s*?([^}]+?)}"
        >
            <script type="text/template">

# Kafka & Avro

### Integrating Avro w/ Kafka...

[Github Repo](https://github.com/inakianduaga/kafka-image-processor) <!-- {_class="small"} -->

---

## What is Avro

- Avro is a data format
<li class="fragment">Needs *Schema* to read *Record*
    <span class="fragment">(!= than *ProtoBuffers* or *JSON*)</span>
</li>

- Records can be stored in binary format or json <!-- {_class="fragment"} -->

---

Schemas can be written in IDL or JSON:
```json
    {
      "namespace": "inakianduaga.kafkaImageProcessor", 
      "type": "record",
      "name": "ImageProcessed",
      "doc": "Image processing response",
      "fields": [
        {
          "name": "content",
          "type": "bytes",
          "doc": "The processed image binary"
        },
        {
          "name": "format",
          "type": {
            "type": "enum",
            "name": "formats",
            "symbols": [
              "JPEG",
              "PNG",
              "GIF"
            ]
          },
          "doc": "The format of the image binary",
          "default": "JPEG"
        }
      ]
    }
```

---

## Avro advantages
- Smaller filesize
- Faster encoding/decoding ???
- Schema evolution
- Avro clients provide automatic validation against schema (so no corrupt data)

---

## Schema
- Smaller files (schema is not part of file)
- Schema evolution (if schema is changed in a smart way, old clients can still read data as if nothing had happened)
- Avro clients provide automatic validation against schema (so no corrupt data)


            </script>
        </section>
    </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.4.0/lib/js/head.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.4.0/js/reveal.js"></script>
<script src="https://cdn.socket.io/socket.io-1.4.5.js"></script>

<script>

    // More info https://github.com/hakimel/reveal.js#configuration
    Reveal.initialize({
        controls: true,
        progress: true,
        history: true,
        center: true,

        transition: 'slide', // none/fade/slide/convex/concave/zoom

        // Options which are passed into marked
        // See https://github.com/chjj/marked#options-1
        markdown: {
            smartypants: true,
            gfm: true,
            tables: true,
            breaks: false,
            pedantic: false,
            sanitize: false,
            smartLists: true,
        },

        multiplex: {
            // Example values. To generate your own, see the socket.io server instructions.
            // http://MYNAME.github.io/MYPRESENTATION/?s=000SECRET000
            secret: Reveal.getQueryHash().s || null, // Obtained from the socket.io server. Gives this (the master) control of the presentation (14876337927442118484)
            id: '44b52687f49ad72b', // Obtained from socket.io server
            url: 'https://reveal-js-multiplex-ccjbegmaii.now.sh' // Location of socket.io server
        },

        // More info https://github.com/hakimel/reveal.js#dependencies
        dependencies: [
            { src: 'https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.4.0/lib/js/classList.js', condition: function() { return !document.body.classList; } },
            { src: 'https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.4.0/plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
            { src: 'https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.4.0/plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
            { src: 'https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.4.0/plugin/highlight/highlight.js', async: true, callback: function() {
                hljs.initHighlightingOnLoad();
            } },
            { src: 'https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.4.0/plugin/zoom-js/zoom.js', async: true },
            { src: 'https://cdnjs.cloudflare.com/ajax/libs/socket.io/1.7.2/socket.io.min.js', async: true },
            { src: 'https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.4.0/plugin/multiplex/master.js', async: true },
            { src: 'https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.4.0/plugin/multiplex/client.js', async: true },
        ]
    });

</script>

</body>
</html>
